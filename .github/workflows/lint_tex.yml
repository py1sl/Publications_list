name: Lint TeX and BibTeX files

on:
  push:
    paths:
      - '**.tex'
      - '**.bib'
  pull_request:
    paths:
      - '**.tex'
      - '**.bib'

jobs:
  lint:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v4

    - name: Install linters
      run: |
        sudo apt-get update
        sudo apt-get install -y chktex bibclean

    - name: Lint LaTeX files
      continue-on-error: true
      run: |
        echo "Checking LaTeX files with ChkTeX..."
        find . -name "*.tex" -type f -exec chktex {} \;

    - name: Lint BibTeX files
      continue-on-error: true
      run: |
        echo "Checking BibTeX files with bibclean..."
        find . -name "*.bib" -type f -exec sh -c 'bibclean -check-values "$1" 2>&1 > /dev/null' sh {} \;
